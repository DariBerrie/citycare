<div class="container">
  <%= render "shared/offcanvas" %>
  <div class="row align-items-top">
    <div data-controller="alerts"  class="col-12 col-lg-8">
      <div class="mt-3 shadow-sm d-flex flex-column w-100">
        <h3>Assignments</h3>
      </div>

      <table class="table table-white table-hover my-3 rounded-4 shadow-sm">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Image</th>
            <th scope="col">Category</th>
            <th scope="col">Alert</th>
            <th scope="col">Address</th>
            <th scope="col">Status</th>
            <th scope="col">Assigned on</th>
          </tr>
        </thead>
        <tbody>
          <% @assignments.each do |assignment| %>
          <tr>
            <th scope="row"><%= assignment.alert.id %></th>
            <td><%= cl_image_tag(assignment.alert.photos[0].key, class: "me-3", width: 50, height: 50, radius: :max, input_html: { style: "object-fit:fill;"}) %></td>
            <td><%= assignment.alert.category %></td>
            <td><%= link_to assignment.alert.title, alert_path(assignment.alert) %></td>
            <td><%= assignment.alert.address %></td>
            <td><%= assignment.alert.status %></td>
            <td><%= assignment.created_at.strftime('%b %d %Y') %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>

<div data-controller="alerts"  class="col-12 col-lg-8">
      <div class="mt-3 shadow-sm d-flex flex-column w-100">
        <h3>Subscriptions</h3>
      </div>

      <table class="table table-white table-hover my-3 rounded-4 shadow-sm">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Image</th>
            <th scope="col">Category</th>
            <th scope="col">Alert</th>
            <th scope="col">Address</th>
            <th scope="col">Status</th>
            <th scope="col">Assigned to</th>
          </tr>
        </thead>
        <tbody>
          <% @assignments.each do |assignment| %>
          <tr>
            <th scope="row"><%= assignment.alert.id %></th>
            <td><%= cl_image_tag(assignment.alert.photos[0].key, class: "me-3", width: 50, height: 50, radius: :max, input_html: { style: "object-fit:fill;"}) %></td>
            <td><%= assignment.alert.category %></td>
            <td><%= link_to assignment.alert.title, alert_path(assignment.alert) %></td>
            <td><%= assignment.alert.address %></td>
            <td><%= assignment.alert.status %></td>
            <td><% if assignment.alert.assignment %>
                 <strong><%= assignment.alert.assignment.worker.first_name %></strong>
                <% else %>
                  <em style="color:#d4cecd;">unassigned</em>
                <% end %>
            </td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>


  </div>
</div>
